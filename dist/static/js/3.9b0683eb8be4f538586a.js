webpackJsonp([3],{"+9mJ":function(s,t){},IdLw:function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("lwon"),o=e.n(i),a=e("d2gY"),n={name:"searchBook",data:function(){return{keyWord:"",books:[],keyList:[],keyH:[],show:"kh",staUrl:a.c,hh:!0}},methods:{search:function(){var s=this;this.show="bs",o()(this.keyH,this.keyWord)<0&&this.keyH.push(this.keyWord);var t=a.a+"/book/fuzzy-search?query="+this.keyWord.trim().replace(/\s/g,"");this.axios.get(t).then(function(t){s.books=t.data.books}).catch(function(s){console.log(s)})},delkey:function(){this.keyWord="",this.show="kh",this.keywords=[],this.books=[]},selectKey:function(s){this.keyWord=s,this.search()},details:function(s){this.$router.push({name:"bookDetails",params:{id:s}})}},watch:{keyWord:function(s,t){var e=this;if("bs"!==this.show){console.log(this.show),s.length>0?this.show="kw":this.show="kh";var i=a.a+"/book/auto-complete?query="+this.keyWord.trim().replace(/\s/g,"");this.axios.get(i).then(function(s){e.keyList=s.data.keywords}).catch(function(s){})}}}},c={render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return s.hh?e("div",{staticClass:"searchBook"},[e("div",{staticClass:"setUp"},[e("div",{staticClass:"setLeft"},[e("span",{staticClass:"back",on:{click:function(t){s.$router.go(-1)}}},[e("i",{staticClass:"mintui mintui-back"})])]),s._v(" "),e("div",{staticClass:"setRight"},[e("div",[e("i",{staticClass:"mintui mintui-search input_icon",on:{click:s.search}}),s._v(" "),e("a",{directives:[{name:"show",rawName:"v-show",value:s.keyWord.length>0,expression:"keyWord.length>0"}],staticClass:"del",on:{click:s.delkey}},[s._v("x")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.keyWord,expression:"keyWord"}],staticClass:"search",attrs:{type:"text",placeholder:"请输入关键字"},domProps:{value:s.keyWord},on:{input:function(t){t.target.composing||(s.keyWord=t.target.value)}}})])])]),s._v(" "),e("div",{staticClass:"searchContent"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bs"===s.show,expression:"show ==='bs'"}],staticClass:"content"},s._l(s.books,function(t,i){return e("div",{staticClass:"books",on:{click:function(e){s.details(t._id)}}},[e("div",{staticClass:"bLeft"},[e("img",{staticClass:"sImg",attrs:{src:s.staUrl+t.cover}})]),s._v(" "),e("div",{staticClass:"sug"},[e("div",{staticClass:"sugge",staticStyle:{"font-size":"14px"}},[s._v(s._s(t.title))]),s._v(" "),e("div",{staticClass:"sugge"},[e("span",[s._v(s._s(t.author))]),s._v(" 著 | "+s._s(t.cat))]),s._v(" "),e("div",{staticClass:"sugge sp",staticStyle:{padding:"2px 0"}},[s._v("\n              "+s._s(t.shortIntro)+"\n            ")])])])})),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"kw"===s.show,expression:"show ==='kw'"}],staticClass:"keywords"},[e("ul",s._l(s.keyList,function(t){return e("li",{on:{click:function(e){s.selectKey(t)}}},[e("i",{staticClass:"mintui mintui-search"}),s._v(s._s(t)+"\n         ")])}))]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"kh"===s.show,expression:"show ==='kh'"}],staticClass:"keywords"},[e("ul",s._l(s.keyH,function(t){return e("li",{on:{click:function(e){s.selectKey(t)}}},[e("i",{staticClass:"mintui mintui-search"}),s._v(s._s(t)+"\n         ")])}))])])]):s._e()},staticRenderFns:[]};var r=e("VU/8")(n,c,!1,function(s){e("+9mJ")},"data-v-7d66cd71",null);t.default=r.exports},Xgit:function(s,t,e){"use strict";var i=e("kM2E"),o=e("vFc/")(!1),a=[].indexOf,n=!!a&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(n||!e("bmIa")(a)),"Array",{indexOf:function(s){return n?a.apply(this,arguments)||0:o(this,s,arguments[1])}})},bmIa:function(s,t,e){"use strict";var i=e("S82l");s.exports=function(s,t){return!!s&&i(function(){t?s.call(null,function(){},1):s.call(null)})}},lwon:function(s,t,e){s.exports={default:e("sS2j"),__esModule:!0}},sS2j:function(s,t,e){e("Xgit"),s.exports=e("FeBl").Array.indexOf}});
//# sourceMappingURL=3.9b0683eb8be4f538586a.js.map