{"version":3,"sources":["webpack:///src/components/searchBook.vue","webpack:///./src/components/searchBook.vue?6dc0","webpack:///./src/components/searchBook.vue","webpack:///./node_modules/core-js/library/modules/es6.array.index-of.js","webpack:///./node_modules/core-js/library/modules/_strict-method.js","webpack:///./node_modules/babel-runtime/core-js/array/index-of.js","webpack:///./node_modules/core-js/library/fn/array/index-of.js"],"names":["searchBook","_this","this","keyWord","url","then","res","books","catch","err","key","search","id","_this2","show","keywords","components_searchBook","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","$event","$router","go","_v","directives","name","rawName","value","length","expression","delkey","attrs","type","placeholder","domProps","input","target","composing","_l","b","index","details","_id","src","staUrl","cover","staticStyle","font-size","_s","title","author","cat","padding","shortIntro","k","selectKey","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","$export","$indexOf","$native","indexOf","NEGATIVE_ZERO","P","F","searchElement","apply","arguments","fails","module","exports","method","arg","call","default","__esModule","Array"],"mappings":"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","file":"static/js/3.9b0683eb8be4f538586a.js","sourcesContent":["<template>\r\n  <div class=\"searchBook\" v-if=\"hh\">\r\n    <div class=\"setUp\">\r\n      <div class=\"setLeft\">\r\n        <span class=\"back\" @click=\"$router.go(-1)\"><i class=\"mintui mintui-back\"></i></span>\r\n      </div>\r\n      <div class=\"setRight\">\r\n        <div>\r\n          <i class=\"mintui mintui-search input_icon\" @click=\"search\"></i>\r\n          <a class=\"del\" v-show=\"keyWord.length>0\" @click=\"delkey\">x</a>\r\n          <input type=\"text\" class=\"search\" placeholder=\"请输入关键字\" v-model=\"keyWord\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"searchContent\">\r\n       <div class=\"content\" v-show=\"show ==='bs'\">\r\n          <div class=\"books\" v-for=\"(b,index) in books\" @click=\"details(b._id)\">\r\n            <div class=\"bLeft\">\r\n               <img :src=\"staUrl + b.cover\" class=\"sImg\">\r\n            </div>\r\n            <div class=\"sug\">\r\n              <div class=\"sugge\" style=\"font-size: 14px;\">{{b.title}}</div>\r\n              <div class=\"sugge\"><span>{{b.author}}</span> 著 | {{b.cat}}</div>\r\n              <div class=\"sugge sp\" style=\"padding:2px 0;\">\r\n                {{b.shortIntro}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n       </div>\r\n        <div class=\"keywords\" v-show=\"show ==='kw'\">\r\n          <ul>\r\n            <li v-for=\"k in keyList\" @click=\"selectKey(k)\">\r\n              <i class=\"mintui mintui-search\"></i>{{k}}\r\n           </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"keywords\" v-show=\"show ==='kh'\">\r\n          <ul>\r\n            <li v-for=\"k in keyH\" @click=\"selectKey(k)\">\r\n              <i class=\"mintui mintui-search\"></i>{{k}}\r\n           </li>\r\n          </ul>\r\n        </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\n  import * as config from '../config/config.js';\r\n  export default{\r\n    name:'searchBook',\r\n    data(){\r\n      return {\r\n        keyWord:'',\r\n        books:[],\r\n        keyList:[],\r\n        keyH:[],\r\n        show:'kh',\r\n        staUrl:config.IMG_BASE_URL,\r\n        hh:true\r\n      }\r\n    },\r\n    methods:{\r\n      search(){\r\n        this.show = 'bs';\r\n        if(Array.indexOf(this.keyH,this.keyWord)<0){\r\n          this.keyH.push(this.keyWord);\r\n        }\r\n        var url =config.API_BASE_URL+'/book/fuzzy-search?query='+this.keyWord.trim().replace(/\\s/g,'');\r\n        this.axios.get(url)\r\n        .then((res)=>{\r\n          this.books = res.data.books;\r\n        })\r\n        .catch((err)=>{\r\n          console.log(err);\r\n        });\r\n\r\n\r\n      },\r\n      delkey(){\r\n        this.keyWord = '';\r\n        this.show = 'kh';\r\n        this.keywords = [];\r\n        this.books = [];\r\n      },\r\n      selectKey(key){\r\n        this.keyWord = key;\r\n        this.search();\r\n      },\r\n      details(id){\r\n        // this.axios.get('http://novel.juhe.im/book-sources?view=summary&book='+id)\r\n        // .then((res)=>{\r\n        //   this.setBidAct(res.data.data[0]._id);\r\n        //   this.id = res.data.data[0]._id;\r\n        // });\r\n        this.$router.push({\r\n          name:'bookDetails',\r\n          params:{id:id}\r\n        });\r\n      }\r\n    },\r\n    watch:{\r\n      keyWord:function(nv,ov){\r\n        if(this.show === 'bs'){\r\n          return;\r\n        }\r\n        console.log(this.show)\r\n        if(nv.length>0){\r\n          this.show = 'kw';\r\n        }else {\r\n          this.show = 'kh';\r\n        }\r\n        var url = config.API_BASE_URL + '/book/auto-complete?query='+this.keyWord.trim().replace(/\\s/g,'');\r\n        this.axios.get(url)\r\n        .then((res)=>{\r\n          this.keyList = res.data.keywords;\r\n        })\r\n        .catch((err)=>{\r\n\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  .input_icon {\r\n    position: absolute;\r\n    right: 22px;\r\n    line-height: 25px;\r\n    top: 9px;\r\n  }\r\n  input:focus {\r\n    border-bottom: 2px #fff solid;\r\n  }\r\n  .del {\r\n    position: absolute;\r\n    right: 50px;\r\n    height: 15px;\r\n    line-height: 16px;\r\n    width: 16px;\r\n    top: 12px;\r\n    border: 1px solid #999;\r\n    border-radius: 8px;\r\n    background-color: #999;\r\n  }\r\n  .searchContent {\r\n    margin-top:2.5rem;\r\n  }\r\n  .keywords {\r\n    ul{\r\n      text-align:left;\r\n      li{\r\n        line-height: 2rem;\r\n        border-bottom: 1px solid #f1f1f1;\r\n        list-style-type: none;\r\n        padding-left: 1rem;\r\n        i {\r\n          padding-right: 1rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .sp {\r\n    display: -webkit-box;\r\n    text-overflow: hidden;\r\n    overflow: hidden;\r\n    -webkit-box-orient: vertical;\r\n    -webkit-line-clamp: 2\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/searchBook.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hh)?_c('div',{staticClass:\"searchBook\"},[_c('div',{staticClass:\"setUp\"},[_c('div',{staticClass:\"setLeft\"},[_c('span',{staticClass:\"back\",on:{\"click\":function($event){_vm.$router.go(-1)}}},[_c('i',{staticClass:\"mintui mintui-back\"})])]),_vm._v(\" \"),_c('div',{staticClass:\"setRight\"},[_c('div',[_c('i',{staticClass:\"mintui mintui-search input_icon\",on:{\"click\":_vm.search}}),_vm._v(\" \"),_c('a',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.keyWord.length>0),expression:\"keyWord.length>0\"}],staticClass:\"del\",on:{\"click\":_vm.delkey}},[_vm._v(\"x\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.keyWord),expression:\"keyWord\"}],staticClass:\"search\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入关键字\"},domProps:{\"value\":(_vm.keyWord)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.keyWord=$event.target.value}}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"searchContent\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show ==='bs'),expression:\"show ==='bs'\"}],staticClass:\"content\"},_vm._l((_vm.books),function(b,index){return _c('div',{staticClass:\"books\",on:{\"click\":function($event){_vm.details(b._id)}}},[_c('div',{staticClass:\"bLeft\"},[_c('img',{staticClass:\"sImg\",attrs:{\"src\":_vm.staUrl + b.cover}})]),_vm._v(\" \"),_c('div',{staticClass:\"sug\"},[_c('div',{staticClass:\"sugge\",staticStyle:{\"font-size\":\"14px\"}},[_vm._v(_vm._s(b.title))]),_vm._v(\" \"),_c('div',{staticClass:\"sugge\"},[_c('span',[_vm._v(_vm._s(b.author))]),_vm._v(\" 著 | \"+_vm._s(b.cat))]),_vm._v(\" \"),_c('div',{staticClass:\"sugge sp\",staticStyle:{\"padding\":\"2px 0\"}},[_vm._v(\"\\n              \"+_vm._s(b.shortIntro)+\"\\n            \")])])])})),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show ==='kw'),expression:\"show ==='kw'\"}],staticClass:\"keywords\"},[_c('ul',_vm._l((_vm.keyList),function(k){return _c('li',{on:{\"click\":function($event){_vm.selectKey(k)}}},[_c('i',{staticClass:\"mintui mintui-search\"}),_vm._v(_vm._s(k)+\"\\n         \")])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show ==='kh'),expression:\"show ==='kh'\"}],staticClass:\"keywords\"},[_c('ul',_vm._l((_vm.keyH),function(k){return _c('li',{on:{\"click\":function($event){_vm.selectKey(k)}}},[_c('i',{staticClass:\"mintui mintui-search\"}),_vm._v(_vm._s(k)+\"\\n         \")])}))])])]):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7d66cd71\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/searchBook.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7d66cd71\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./searchBook.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./searchBook.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./searchBook.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7d66cd71\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./searchBook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7d66cd71\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/searchBook.vue\n// module id = null\n// module chunks = ","'use strict';\nvar $export = require('./_export');\nvar $indexOf = require('./_array-includes')(false);\nvar $native = [].indexOf;\nvar NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;\n\n$export($export.P + $export.F * (NEGATIVE_ZERO || !require('./_strict-method')($native)), 'Array', {\n  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? $native.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments[1]);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.index-of.js\n// module id = Xgit\n// module chunks = 3","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_strict-method.js\n// module id = bmIa\n// module chunks = 3","module.exports = { \"default\": require(\"core-js/library/fn/array/index-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/array/index-of.js\n// module id = lwon\n// module chunks = 3","require('../../modules/es6.array.index-of');\nmodule.exports = require('../../modules/_core').Array.indexOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/index-of.js\n// module id = sS2j\n// module chunks = 3"],"sourceRoot":""}