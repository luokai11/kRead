webpackJsonp([4],{Oz6Y:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),r=i.n(s),a=i("foBo"),n={data:function(){return{dragging:{enable:!1,axis:"",offset:""},bars:{horizontal:{elm:"",parent:"",size:0},vertical:{elm:"",parent:"",size:0}},wrapperObj:{elm:"",scrollHeight:"",scrollWidth:"",scrollLeft:"",scrollTop:""},container:{elm:"",scrollHeight:"",scrollWidth:""}}},mounted:function(){Object(a.addResizeListener)(this.$refs.container,this.resize),Object(a.addResizeListener)(this.$refs.wrapperRef.children[0],this.resize),document.addEventListener("mousemove",this.onDrag),document.addEventListener("touchmove",this.onDrag),document.addEventListener("mouseup",this.stopDrag),document.addEventListener("touchend",this.stopDrag),this.getSizes()},beforeDestroy:function(){Object(a.removeResizeListener)(this.$refs.container,this.resize),Object(a.removeResizeListener)(this.$refs.wrapperRef.children[0],this.resize),document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("touchmove",this.onDrag),document.removeEventListener("mouseup",this.stopDrag),document.removeEventListener("touchend",this.stopDrag)},computed:{propWrapperSize:function(){return this.wrapper?this.wrapper:""},propBarVertical:function(){return this.vBar?this.vBar:""},propBarInternalVertical:function(){return this.vBarInternal?this.vBarInternal:""},propBarHorizontal:function(){return this.hBar?this.hBar:""},propBarInternalHorizontal:function(){return this.hBarInternal?this.hBarInternal:""},barSizeVertical:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{height:"calc(100% - 16px)"}},barSizeHorizontal:function(){if(this.bars.horizontal.size&&this.bars.vertical.size)return{width:"calc(100% - 16px)"}},barInternalVertical:function(){var t=this.getBarInternal("Y");return{height:this.bars.vertical.size+"px",top:t+"px"}},barInternalHorizontal:function(){var t=this.getBarInternal("X");return{width:this.bars.horizontal.size+"px",left:t+"px"}},validationScrolls:function(){return this.bars.horizontal.size?this.bars.vertical.size?void 0:"overflowY: hidden":"overflowX: hidden"}},methods:{scroll:function(t){this.getSizes(0,0)},resize:function(){this.getSizes()},getBarInternal:function(t){var e=void 0,i=void 0,s=void 0,r=void 0,a=void 0;return a=this.bars.horizontal.size&&this.bars.vertical.size?40:32,"X"===t?(e=this.wrapperObj.scrollLeft,i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size+a,r=this.container.scrollWidth):"Y"===t&&(e=this.wrapperObj.scrollTop,i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size+a,r=this.container.scrollHeight),e/(i-r)*(r-s)},getCoordinates:function(t,e){var i=void 0,s=void 0,r=void 0,a=void 0,n=void 0;return"X"===e?(i=this.wrapperObj.scrollWidth,s=this.bars.horizontal.size,r=this.container.scrollWidth,a=this.container.elm.offsetLeft,n=t.clientX-this.dragging.offset):"Y"===e&&(i=this.wrapperObj.scrollHeight,s=this.bars.vertical.size,r=this.container.scrollHeight,a=this.container.elm.offsetTop-1.4*this.bars.vertical.size,n=t.clientY-this.dragging.offset),(i-r)*(n-a)/(r-s)},startDrag:function(t){t.preventDefault(),t.stopPropagation();var e,i=(t=t.changedTouches?t.changedTouches[0]:t).target.getAttribute("data-axis"),s=t.target.getAttribute("data-drag-source"),r=void 0;"Y"===i?"bar"===s?r=t.explicitOriginalTarget.offsetTop+1.4*this.bars.vertical.size:"internal"===s&&(r=t.clientY-this.bars.vertical.elm.offsetTop):"Y"===i&&("bar"===s?r=t.explicitOriginalTarget.offsetTop+1.4*this.bars.horizontal.size:"internal"===s&&(r=t.clientX-this.bars.horizontal.elm.offsetTop)),e=r,this.dragging={enable:!0,axis:i,offset:e}},onDrag:function(t){if(this.dragging.enable){t.preventDefault(),t.stopPropagation(),t=t.changedTouches?t.changedTouches[0]:t;var e=this.$refs.wrapperRef;"X"===this.dragging.axis?e.scrollLeft=this.getCoordinates(t,"X"):"Y"===this.dragging.axis&&(e.scrollTop=this.getCoordinates(t,"Y")),this.getSizes()}},stopDrag:function(t){this.dragging.enable&&(this.dragging={enable:!1,axis:""})},getSizes:function(t,e){var i=this.$refs.wrapperRef,s=this.$refs.container,r=this.$refs.verticalBar,a=this.$refs.verticalInternalBar,n=this.$refs.horizontalBar,o=this.$refs.horizontalInternalBar;this.wrapperObj={elm:i,scrollHeight:i.scrollHeight,scrollWidth:i.scrollWidth,scrollLeft:i.scrollLeft,scrollTop:i.scrollTop},this.container={elm:s,scrollHeight:s.scrollHeight,scrollWidth:s.scrollWidth},this.bars.horizontal.elm=o,this.bars.horizontal.parent=n,this.bars.horizontal.size=this.wrapperObj.scrollWidth-this.container.scrollWidth>24&&this.wrapperObj.scrollWidth-this.container.scrollWidth!=0?this.container.scrollWidth/this.wrapperObj.scrollWidth*this.container.scrollWidth:0,this.bars.vertical.elm=a,this.bars.vertical.parent=r,this.bars.vertical.size=this.wrapperObj.scrollHeight-this.container.scrollHeight>24&&this.wrapperObj.scrollHeight-this.container.scrollHeight!=0?this.container.scrollHeight/this.wrapperObj.scrollHeight*this.container.scrollHeight:0}},props:["wrapper","vBar","vBarInternal","hBar","hBarInternal"]},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.propWrapperSize,attrs:{id:"vbar"}},[i("div",{ref:"container",staticClass:"bar--container",on:{wheel:t.scroll,touchmove:t.scroll}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.bars.vertical.size,expression:"bars.vertical.size"}],ref:"verticalBar",staticClass:"bar--vertical",class:t.propBarVertical,style:t.barSizeVertical,attrs:{"data-axis":"Y","data-drag-source":"bar"},on:{touchstart:t.startDrag,mousedown:t.startDrag}},[i("div",{ref:"verticalInternalBar",staticClass:"bar--vertical-internal",class:t.propBarInternalVertical,style:t.barInternalVertical,attrs:{"data-axis":"Y","data-drag-source":"internal"},on:{touchstart:t.startDrag,mousedown:t.startDrag}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.bars.horizontal.size,expression:"bars.horizontal.size"}],staticClass:"bar--horizontal",class:t.propBarHorizontal,style:t.barSizeHorizontal,attrs:{"data-axis":"X","data-drag-source":"bar"},on:{touchstart:t.startDrag,mousedown:t.startDrag}},[i("div",{ref:"horizontalBar",staticClass:"bar--horizontal-internal",class:t.propBarInternalHorizontal,style:t.barInternalHorizontal,attrs:{"data-axis":"X","data-drag-source":"internal"},on:{touchstart:t.startDrag,mousedown:t.startDrag}})]),i("div",{ref:"wrapperRef",staticClass:"bar--wrapper",style:t.validationScrolls},[t._t("default")],2)])])},staticRenderFns:[]};var l=i("VU/8")(n,o,!1,function(t){i("Rupz")},"data-v-7ba2efa2",null).exports,c=(i("v2ns"),i("7QTg")),h=i("Au9i"),p=i("NYxO"),d=i("d2gY"),v={name:"chapter",components:{VBar:l,swiper:c.swiper,swiperSlide:c.swiperSlide},data:function(){var t=this;return{chapters:[],bArr:[],show:{showTai:!0},popupVisible:!1,popModal:!1,ps:"",sb:!1,content:"",index:"",screen:{height:"0px",width:""},face:"normal",typeFace:{small:{fontSize:"12px",lineHeight:"20px",letterSpacing:"0px"},normal:{fontSize:"16px",lineHeight:"24px",letterSpacing:"1px"},big:{fontSize:"20px",lineHeight:"28px",letterSpacing:"0px"}},swiperOption:{direction:"horizontal",effect:"coverflow",on:{touchEnd:function(){0===t.swiper.activeIndex&&"prev"===t.swiper.swipeDirection&&t.getContent(t.index-1),t.swiper.activeIndex===t.swiper.slidesGrid.length-1&&"next"===t.swiper.swipeDirection&&t.getContent(t.index+1)}}}}},methods:{backList:function(){this.popupVisible=!1,this.popModal=!1,this.sb=!0},close:function(){this.popupVisible=!1,this.popModal=!1},showPop:function(){this.popupVisible=!0,this.popModal=!0},back:function(){this.$router.go(-1)},getContent:function(t){var e=this;if(t<0)this.index=0;else{this.index=t,h.Indicator.open();var i=d.b+"/chapter/"+encodeURIComponent(this.chapters[t].link);this.axios.get(i).then(function(t){h.Indicator.close(),e.sb=!1,e.content=t.data.chapter.body,e.$nextTick(function(){this.ps=this.setTextFmt(this.content),this.bArr=this.ps.split("\n"),this.swiper.slideTo(0,10,!1)})}).catch(function(t){h.Indicator.close()})}},setTextFmt:function(t){for(var e=window.innerHeight-16,i=window.innerWidth-30,s=this.typeFace[this.face],r=s.letterSpacing?+s.letterSpacing.replace(/px$/,""):0,a=+s.fontSize.replace(/px$/,"")+r,n=Math.floor(e/+s.lineHeight.replace(/px$/,"")),o=0,l=0,c="",h="",p="",d=0,v=t.split("\n"),u=0,f=v.length;u<f;u++){for(var g=0,m=v[u].length;g<m;){var b=v[u][g];o<n?(l+=a)<i?(p+="<span>"+b+"</span>",b.length,g++):(p+="<span>"+b+"</span>",d-=a,"".length,g++,Math.abs(d)>1&&(h+="<p>"+p+"</p>"),o++,p="",l=0,0):(c+=h="<div>"+h+"</div>\n",h="",o=0)}p.length>0&&(h+="<p>"+p+"</p>",o++,p="",l=0,0)}return c+=h="<div>"+h+"</div>",h="",o=0,c}},created:function(){var t=this;this.screen.height=window.innerHeight-16+"px",this.screen.width=window.innerWidth-28+"px",h.Indicator.open();var e=d.a+"/mix-atoc/"+this.$route.params.id+"?view=chapters";this.axios.get(e).then(function(e){console.log(e),h.Indicator.close(),e.data.ok&&(t.sb=!0,t.chapters=e.data.mixToc.chapters)}).catch(function(t){console.log(t)})},computed:r()({},Object(p.c)({bId:function(t){return t.app.bId}}),{swiper:function(){return this.$refs.mySwiper.swiper}})},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chapter"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.sb,expression:"sb"}],staticClass:"setUp"},[i("div",{staticClass:"setLeft"},[i("span",{staticClass:"back",on:{click:t.back}},[i("i",{staticClass:"mintui mintui-back"})]),t._v(" "),i("div",{staticClass:"back"},[t._v("\n       目录\n      ")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sb,expression:"sb"}]},[i("p",{staticClass:"cpd"},[t._v("共"),i("span",[t._v(t._s(t.chapters.length))]),t._v("章")]),t._v(" "),i("div",{staticClass:"chap"},[i("v-bar",{attrs:{wrapper:"wrapper",vBar:"false",vBarInternal:"false"}},[i("div",t._l(t.chapters,function(e,s){return i("p",{class:{selectd:s===t.index},on:{click:function(e){t.getContent(s)}}},[t._v("\n          "+t._s(e.title)+"\n          ")])}))])],1)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.sb,expression:"!sb"}],staticClass:"bc",class:{bgc:!t.show.showTai},style:t.typeFace[t.face]},[i("div",{style:t.screen,attrs:{id:"banner"}},[i("div",{staticClass:"swiper-container",staticStyle:{height:"inherit"},on:{click:t.showPop}},[i("swiper",{ref:"mySwiper",attrs:{options:t.swiperOption}},t._l(t.bArr,function(e){return i("swiper-slide",{staticClass:"swiper-slide",domProps:{innerHTML:t._s(e)}},[t._v(t._s(e))])}))],1)])]),t._v(" "),i("div",{ref:"popupTop",staticClass:"popupTop setUp",class:{popTop:t.popModal}},[i("div",{staticClass:"setLeft"},[i("span",{staticClass:"back",on:{click:t.back}},[i("i",{staticClass:"mintui mintui-back"})])]),t._v(" "),t._m(0)]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.popModal,expression:"popModal"}],staticClass:"modal",on:{click:t.close}}),t._v(" "),i("mt-popup",{staticClass:"popup",attrs:{position:"bottom",modal:!1},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[i("div",{staticClass:"down"},[i("div",{staticClass:"item",on:{click:t.backList}},[i("i",{staticClass:"mintui mintui-mulu"}),t._v(" "),i("div",[t._v("目录")])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){t.show.showTai=!t.show.showTai}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show.showTai,expression:"show.showTai"}]},[i("i",{staticClass:"mintui mintui-taiyang"}),t._v(" "),i("div",[t._v("日间模式")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.show.showTai,expression:"!show.showTai"}]},[i("i",{staticClass:"mintui mintui-yueliang"}),t._v(" "),i("div",[t._v("夜间模式")])])]),t._v(" "),i("div",{staticClass:"item"},[i("i",{staticClass:"mintui mintui-ziti"}),t._v(" "),i("div",[t._v("设置")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"setRight"},[e("span",[this._v("换源")]),this._v(" "),e("span",[this._v("刷新")]),this._v(" "),e("span",[this._v("报错")])])}]};var f=i("VU/8")(v,u,!1,function(t){i("hp6S")},"data-v-47f8db66",null);e.default=f.exports},Rupz:function(t,e){},foBo:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i,s,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){return"object"===("undefined"==typeof window?"undefined":r(window))},n=a()?window:t,o=!!a()&&document.attachEvent,l=!1,c=null,h=null,p=null,d=null,v=function(t){var e=t.__resizeTriggers__,i=e.firstElementChild,s=e.lastElementChild,r=i.firstElementChild;s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,r.style.width=i.offsetWidth+1+"px",r.style.height=i.offsetHeight+1+"px",i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight},u=(i=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(t){return setTimeout(t,20)},function(t){return i(t)}),f=(s=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout,function(t){return s(t)}),g=function(t){var e=this;v(this),this.__resizeRAF__&&f(this.__resizeRAF__),this.__resizeRAF__=u(function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach(function(i){i.call(e,t)}))})};if(a()&&!o){var m=!1,b="";d="animationstart";var _="Webkit Moz O ms".split(" "),w="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),z="",x=document.createElement("fakeelement");if(void 0!==x.style.animationName&&(m=!0),!1===m)for(var C=0;C<_.length;C++)if(void 0!==x.style[_[C]+"AnimationName"]){(z=_[C])+"Animation",b="-"+z.toLowerCase()+"-",d=w[C],m=!0;break}h="@"+b+"keyframes "+(c="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",p=b+"animation: 1ms "+c+"; "}e.addResizeListener=function(t,e){o?t.attachEvent("onresize",e):a()&&(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),function(){if(!l){var t=(h||"")+".resize-triggers { "+(p||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.appendChild(i),l=!0}}(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),v(t),t.addEventListener("scroll",g,!0),d&&t.__resizeTriggers__.addEventListener(d,function(e){e.animationName==c&&v(t)})),t.__resizeListeners__.push(e))},e.removeResizeListener=function(t,e){o?t.detachEvent("onresize",e):a()&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",g,!0),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}}).call(e,i("DuR2"))},hp6S:function(t,e){},v2ns:function(t,e){}});
//# sourceMappingURL=4.579ed28f965487cdd53e.js.map